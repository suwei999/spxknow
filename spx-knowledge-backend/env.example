###############################
# SPX Knowledge Base .env 示例 #
###############################

# 应用
APP_NAME=SPX Knowledge Base
APP_VERSION=1.0.0
DEBUG=true
HOST=0.0.0.0
PORT=8000
ALLOWED_HOSTS=*
ENVIRONMENT=development
SECRET_KEY=replace-with-your-secret
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/app.log

# 数据库（任选其一：DATABASE_URL 或分项配置）
DATABASE_URL=mysql+pymysql://user:password@localhost:3306/spx_knowledge
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=user
MYSQL_PASSWORD=password
MYSQL_DATABASE=spx_knowledge

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# OpenSearch
OPENSEARCH_URL=http://localhost:9200
OPENSEARCH_USERNAME=
OPENSEARCH_PASSWORD=
OPENSEARCH_USE_SSL=false
OPENSEARCH_VERIFY_CERTS=false

# MinIO
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET_NAME=spx-knowledge-base
MINIO_SECURE=false

# 嵌入/向量模型（本地 Ollama 示例）
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_API_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# 图像嵌入/CLIP（如未使用可保留默认）
IMAGE_EMBEDDING_MODEL=clip_vit_b32
CLIP_MODEL_NAME=ViT-B-32
# 可选：如需修改模型缓存目录
# CLIP_MODELS_DIR=./models/clip
# CLIP_PRETRAINED_PATH=./models/clip/ViT-B-32-openclip.pt
# CLIP_CACHE_DIR=./models/clip/cache
# 可选：Hugging Face 缓存目录（默认使用 ~/.cache/huggingface）
# HF_HOME=~/.cache/huggingface

# 多模态与阈值（根据需要调整，保留默认即可）
MULTIMODAL_TEXT_MAX_LENGTH=10000
MULTIMODAL_IMAGE_MAX_SIZE_MB=10
MULTIMODAL_IMAGE_MAX_DIMENSION=1024
MULTIMODAL_MAX_KEYWORDS=10
MULTIMODAL_DEFAULT_FUSION_SCORE=0.8
MULTIMODAL_DEFAULT_SEMANTIC_SIMILARITY=0.7
MULTIMODAL_DEFAULT_RELEVANCE_SCORE=0.7
MULTIMODAL_DEFAULT_CONSISTENCY_SCORE=0.8

# 历史/检索（可保持默认）
QA_DEFAULT_PAGE_SIZE=20
QA_MAX_PAGE_SIZE=100
QA_DEFAULT_SIMILARITY_THRESHOLD=0.7
QA_DEFAULT_MAX_SOURCES=10
QA_DEFAULT_MAX_HISTORY=5
QA_DEFAULT_MAX_RESULTS=10
QA_HISTORY_INDEX_NAME=qa_history
QA_HISTORY_CLEANUP_DAYS=90
QA_HISTORY_DEFAULT_PAGE_SIZE=20
QA_HISTORY_MAX_PAGE_SIZE=100

# 向量维度/文本限制
TEXT_EMBEDDING_DIMENSION=1024
IMAGE_EMBEDDING_DIMENSION=512
TEXT_EMBED_MAX_CHARS=1024

# 文件/安全
FILE_HEADER_READ_SIZE=1024
MAX_FILE_SIZE=104857600
# 仅 DOCX（与 settings 保持一致）
ALLOWED_FILE_TYPES=.docx

# 文档处理参数
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_CHUNKS_PER_DOCUMENT=1000
PARSING_TIMEOUT=300
VECTORIZATION_TIMEOUT=600
OLLAMA_TIMEOUT=300
STORE_CHUNK_TEXT_IN_DB=false

# ClamAV（如不使用可保留默认）
CLAMAV_ENABLED=true
CLAMAV_SOCKET_PATH=
CLAMAV_TCP_HOST=localhost
CLAMAV_TCP_PORT=3310
CLAMAV_SCAN_TIMEOUT=60
CLAMAV_USE_TCP=false

# 缓存
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=300


